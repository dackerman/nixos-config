#!/usr/bin/env bash

# Auto-start tmux with shared "main" session
# Prevents infinite loops by checking for existing tmux environment

if command -v tmux &> /dev/null && [[ ! "$TERM" =~ screen ]] && [[ ! "$TERM" =~ tmux ]] && [ -z "$TMUX" ]; then
  # Create a unique session name using process ID
  session_name="main-$$"
  exec tmux new-session -s "$session_name"
fi