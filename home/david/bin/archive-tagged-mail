echo "the following emails are scheduled to be archived:"
notmuch address --output=count tag:archive folder:gmail/Inbox | sort -h -r
if [[ "$1" = "commit" ]]
then
    echo "archiving..."
    notmuch search --output=files tag:archive folder:gmail/Inbox | grep gmail/Inbox | awk '{ printf "'\''%s'\''\n", $1 }' | xargs -n 20 rm
    notmuch new # updates the index
else
    echo "not archiving anything yet. pass 'commit' to this command to do so"
fi
